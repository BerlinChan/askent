fragment PagedQuestionFields on PagedQuestion {
  first
  skip
  totalCount
  hasNextPage
}
fragment QuestionFields on Question {
  id
  createdAt
  updatedAt
  voteCount
  content
  reviewStatus
  star
  top
  author {
    id
    name
  }
}

query QuestionsByEvent(
  $eventId: ID!
  $where: QuestionWhereInput
  $pagination: PaginationInputType!
  $orderBy: QuestionOrderByInput
) {
  questionsByEvent(
    eventId: $eventId
    where: $where
    pagination: $pagination
    orderBy: $orderBy
  ) @connection(key: "questionsByEvent", filter: ["eventId", "where"]) {
    ...PagedQuestionFields
    list {
      ...QuestionFields
    }
  }
}

mutation DeleteQuestion($questionId: ID!) {
  deleteQuestion(questionId: $questionId) {
    id
  }
}

mutation DeleteAllReviewQuestions($eventId: ID!) {
  deleteAllReviewQuestions(eventId: $eventId)
}

mutation PublishAllReviewQuestions($eventId: ID!) {
  publishAllReviewQuestions(eventId: $eventId)
}

mutation UpdateQuestion($input: UpdateQuestionInputType!) {
  updateQuestion(input: $input) {
    ...QuestionFields
  }
}

subscription QuestionAdded($eventId: ID!, $role: RoleName!) {
  questionAdded(eventId: $eventId, role: $role) {
    ...QuestionFields
  }
}

subscription QuestionsUpdated($eventId: ID!) {
  questionsUpdated(eventId: $eventId) {
    ...QuestionFields
  }
}

subscription QuestionsRemoved($eventId: ID!) {
  questionsRemoved(eventId: $eventId) {
    id
    reviewStatus
  }
}
