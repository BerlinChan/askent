fragment QuestionPagedFields on QuestionPaged {
  limit
  offset
  totalCount
  hasNextPage
}
fragment QuestionFields on Question {
  id
  createdAt
  updatedAt
  voteUpCount
  content
  reviewStatus
  star
  top
  author {
    id
    name
    avatar
  }
}

query QuestionsByEvent(
  $eventId: ID!
  $questionFilter: QuestionFilter
  $searchString: String
  $pagination: PaginationInput!
  $order: QuestionOrder
) {
  questionsByEvent(
    eventId: $eventId
    questionFilter: $questionFilter
    searchString: $searchString
    pagination: $pagination
    order: $order
  )
    @connection(
      key: "questionsByEvent"
      filter: ["eventId", "questionFilter", "searchString", "order"]
    ) {
    ...QuestionPagedFields
    list {
      ...QuestionFields
    }
  }
}

mutation DeleteQuestion($questionId: ID!) {
  deleteQuestion(questionId: $questionId)
}

mutation DeleteAllReviewQuestions($eventId: ID!) {
  deleteAllReviewQuestions(eventId: $eventId)
}

mutation PublishAllReviewQuestions($eventId: ID!) {
  publishAllReviewQuestions(eventId: $eventId)
}

mutation UpdateQuestionReviewStatus(
  $questionId: ID!
  $reviewStatus: ReviewStatus!
) {
  updateQuestionReviewStatus(
    questionId: $questionId
    reviewStatus: $reviewStatus
  ) {
    ...QuestionFields
  }
}
mutation UpdateQuestionStar($questionId: ID!, $star: Boolean!) {
  updateQuestionStar(questionId: $questionId, star: $star) {
    ...QuestionFields
  }
}
mutation UpdateQuestionTop($questionId: ID!, $top: Boolean!) {
  updateQuestionTop(questionId: $questionId, top: $top) {
    ...QuestionFields
  }
}
mutation UpdateQuestionContent($questionId: ID!, $content: String!) {
  updateQuestionContent(questionId: $questionId, content: $content) {
    ...QuestionFields
  }
}

subscription QuestionAdded(
  $eventId: ID!
  $asRole: RoleName!
  $questionFilter: QuestionFilter
  $searchString: String
  $order: QuestionOrder
  $limit: Int
) {
  questionAdded(
    eventId: $eventId
    asRole: $asRole
    questionFilter: $questionFilter
    searchString: $searchString
    order: $order
    limit: $limit
  ) {
    ...QuestionFields
  }
}

subscription QuestionUpdated($eventId: ID!, $asRole: RoleName!) {
  questionUpdated(eventId: $eventId, asRole: $asRole) {
    ...QuestionFields
  }
}

subscription QuestionRemoved($eventId: ID!, $asRole: RoleName!) {
  questionRemoved(eventId: $eventId, asRole: $asRole)
}
