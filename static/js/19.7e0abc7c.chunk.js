(this["webpackJsonpaskent-client"]=this["webpackJsonpaskent-client"]||[]).push([[19],{261:function(e,t,n){"use strict";function a(e,t){return Object.prototype.hasOwnProperty.call(t,e)}n.d(t,"a",(function(){return a}))},296:function(e,t,n){"use strict";n(1);var a=n(419),r=n(457),i=n(632),c=n(187),s=n(152),o=n(318),l=n.n(o),u=n(8),d=Object(c.a)((function(e){return Object(s.a)({dialogTitle:{display:"flex",justifyContent:"space-between",alignItems:"center"}})}));t.a=function(e){var t=e.title,n=e.onClose,c=d();return Object(u.jsxs)(a.a,{disableTypography:!0,className:c.dialogTitle,children:[Object(u.jsx)(r.a,{variant:"subtitle1",color:"textSecondary",children:t}),Object(u.jsx)(i.a,{onClick:n,size:"small",children:Object(u.jsx)(l.a,{color:"inherit",fontSize:"small"})})]})}},297:function(e,t,n){"use strict";var a=n(41),r=Object(a.a)((function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}));t.a=r},381:function(e,t,n){"use strict";var a=n(40),r=n(94),i=n.n(r),c=n(114),s=n(112),o=n(39),l=n(1),u=n.n(l),d=n(636),j=n(638),b=n(667),f=n(643),p=n(347),v=n(639),h=n(458),O=n(187),m=n(152),x=n(67),g=n(258),y=n(276),w=n(240),M=n(249),k=n(659),C=n(243),A=n(296),E=n(241),S=n(120),I=n(242),N=n(111),F=n(641),L=n(371),B=n(632),_=n(247),z=n(385),R=n(379),D=n.n(R),T=n(432),H=n.n(T),P=n(433),W=n.n(P),V=n(457),G=n(186),q=n(566),U=n(431),Q=n.n(U),K=n(430),Y=n.n(K),J=n(8),X=Object(O.a)((function(e){return Object(m.a)({collapseList:{},item:{marginBottom:e.spacing(2)},head:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},title:{display:"flex",alignItems:"center",color:e.palette.primary.main},titleText:{fontWeight:e.typography.fontWeightBold,marginLeft:e.spacing(1)},body:{paddingLeft:32,marginBottom:e.spacing(2)}})})),Z=function(e){var t=e.list,n=e.defaultActiveKey,a=void 0===n?[]:n,r=X(),i=u.a.useState(a),c=Object(o.a)(i,2),s=c[0],l=c[1];return Object(J.jsx)(p.a,{className:r.collapseList,children:t.map((function(e,t){return Object(J.jsxs)(p.a,{className:r.item,children:[Object(J.jsxs)(p.a,{className:r.head,onClick:function(e){return function(e){l(s.includes(e)?s.filter((function(t){return t!==e})):s.concat([e]))}(t)},children:[Object(J.jsxs)("div",{className:r.title,children:[u.a.cloneElement(e.titleIcon,{color:"inherit"}),Object(J.jsx)(V.a,{variant:"h6",color:"inherit",className:r.titleText,children:e.titleText})]}),s.includes(t)?Object(J.jsx)(Y.a,{color:"inherit",fontSize:"small"}):Object(J.jsx)(Q.a,{color:"inherit",fontSize:"small"})]}),Object(J.jsx)(G.a,{className:r.body,in:s.includes(t),children:e.body}),Object(J.jsx)(q.a,{})]},t)}))})},$=n(378),ee=n.n($),te=Object(O.a)((function(e){return Object(m.a)({basicInfoField:{width:"70%"},dateRange:{display:"flex",justifyContent:"space-between","& > *":{width:"47%"}}})})),ne=function(e){var t=e.defaultFocus,n=void 0===t?"name":t,a=e.eventData,r=e.meData,i=te(),c=Object(g.a)().formatMessage,s=u.a.useRef(null),l=u.a.useState(!1),d=Object(o.a)(l,2),j=d[0],b=d[1],f=(null===a||void 0===a?void 0:a.eventById.owner.id)!==(null===r||void 0===r?void 0:r.me.id);return Object(J.jsx)(Z,{list:[{titleIcon:Object(J.jsx)(H.a,{}),titleText:Object(J.jsx)(y.a,{id:"Basic_information",defaultMessage:"Basic information"}),body:Object(J.jsxs)(p.a,{className:i.basicInfoField,children:[Object(J.jsx)(w.a,{component:_.c,fullWidth:!0,autoFocus:"name"===n,name:"name",label:c({id:"Event_name",defaultMessage:"Event name"}),margin:"normal",size:"small",disabled:f}),Object(J.jsxs)(p.a,{className:i.dateRange,children:[Object(J.jsx)(w.a,{component:z.a,autoFocus:"startAt"===n,name:"startAt",label:c({id:"Start_datetime",defaultMessage:"Start date time"}),variant:"inline",margin:"normal",size:"small",autoOk:!0,disableToolbar:!0,disabled:f}),Object(J.jsx)(w.a,{component:z.a,autoFocus:"endAt"===n,name:"endAt",label:c({id:"End_datetime",defaultMessage:"End date time"}),variant:"inline",margin:"normal",size:"small",autoOk:!0,disableToolbar:!0,disabled:f})]}),Object(J.jsx)(w.a,{component:_.c,fullWidth:!0,autoFocus:"code"===n,name:"code",label:c({id:"Event_code",defaultMessage:"Event code"}),margin:"normal",size:"small",disabled:f}),Object(J.jsx)(w.a,{component:_.c,inputRef:s,fullWidth:!0,autoFocus:"eventLink"===n,name:"eventLink",label:c({id:"Event_link",defaultMessage:"Event link"}),size:"small",InputProps:{readOnly:!0,endAdornment:Object(J.jsx)(F.a,{position:"end",children:Object(J.jsx)(L.a,{arrow:!0,placement:"right",leaveDelay:3e3,title:c(j?{id:"Copied!",defaultMessage:"Copied!"}:{id:"Copy to clipboard",defaultMessage:"Copy to clipboard"}),children:Object(J.jsx)(B.a,{size:"small",onClick:function(){var e,t;null===(e=s.current)||void 0===e||e.focus(),null===(t=s.current)||void 0===t||t.select();try{var n;s.current&&ee()(null===(n=s.current)||void 0===n?void 0:n.value)&&(b(!0),window.setTimeout((function(){return b(!1)}),3e3))}catch(a){console.log(a)}},children:Object(J.jsx)(D.a,{fontSize:"inherit",color:"inherit"})})})})},onFocus:function(){var e;null===(e=s.current)||void 0===e||e.select()}})]})},{titleIcon:Object(J.jsx)(W.a,{}),titleText:Object(J.jsx)(y.a,{id:"Security",defaultMessage:"Security"}),body:Object(J.jsx)(p.a,{})}],defaultActiveKey:[0]})},ae=n(265),re=n.n(ae),ie=Object(O.a)((function(e){return Object(m.a)({switchItem:{display:"flex",justifyContent:"space-between",alignItems:"center"}})})),ce=function(e){var t=e.label,n=e.description,a=e.switchField,r=ie();return Object(J.jsxs)("div",{className:r.switchItem,children:[Object(J.jsxs)("div",{children:[Object(J.jsx)(V.a,{variant:"body1",children:t}),Object(J.jsx)(V.a,{variant:"body2",color:"textSecondary",children:n})]}),a]})},se=function(){return Object(J.jsx)(Z,{list:[{titleIcon:Object(J.jsx)(re.a,{}),titleText:Object(J.jsx)(y.a,{id:"Audience_Q&A",defaultMessage:"Audience Q&A"}),body:Object(J.jsx)(u.a.Fragment,{children:Object(J.jsx)(ce,{label:Object(J.jsx)(y.a,{id:"Moderation",defaultMessage:"Moderation"}),description:Object(J.jsx)(y.a,{id:"Easily review all questions before they go live.",defaultMessage:"Easily review all questions before they go live."}),switchField:Object(J.jsx)(w.a,{component:_.b,type:"checkbox",name:"moderation"})})})}]})},oe=n(653),le=n(654),ue=n(655),de=n(656),je=n(657),be=n(658),fe=n(634),pe=n(419),ve=n(420),he=n(435),Oe=n.n(he),me=n(268),xe=Object(O.a)((function(e){return Object(m.a)({removeButton:{color:e.palette.text.secondary}})})),ge=function(e){var t=e.eventId,n=e.eventData,a=e.meData,r=xe(),c=u.a.useState(!1),l=Object(o.a)(c,2),d=l[0],j=l[1],b=u.a.useState(""),f=Object(o.a)(b,2),v=f[0],O=f[1],m=Object(E.t)({variables:{eventId:t}}),x=m.data,g=m.loading,w=m.refetch,M=Object(E.C)(),k=Object(o.a)(M,2),C=k[0],A=k[1].loading,S=(null===n||void 0===n?void 0:n.eventById.owner.id)!==(null===a||void 0===a?void 0:a.me.id),I=function(){O("")},N=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C({variables:{eventId:t,guestId:v}});case 2:w(),I();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(J.jsxs)(u.a.Fragment,{children:[Object(J.jsx)(p.a,{display:"flex",justifyContent:"flex-end",children:Object(J.jsx)(h.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){j(!0)},disabled:S,children:Object(J.jsx)(y.a,{id:"Add guest",defaultMessage:"Add guest"})})}),Object(J.jsx)(oe.a,{children:Object(J.jsxs)(le.a,{size:"small",children:[Object(J.jsx)(ue.a,{children:Object(J.jsxs)(de.a,{children:[Object(J.jsx)(je.a,{children:Object(J.jsx)(y.a,{id:"Name",defaultMessage:"Name"})}),Object(J.jsx)(je.a,{align:"right",children:Object(J.jsx)(y.a,{id:"Email",defaultMessage:"Email"})}),Object(J.jsx)(je.a,{align:"right",children:Object(J.jsx)(y.a,{id:"Actions",defaultMessage:"Actions"})})]})}),Object(J.jsx)(be.a,{children:null===x||void 0===x?void 0:x.eventById.guestes.map((function(e,t){return Object(J.jsxs)(de.a,{children:[Object(J.jsx)(je.a,{component:"th",scope:"row",children:e.name}),Object(J.jsx)(je.a,{align:"right",children:e.email}),Object(J.jsx)(je.a,{align:"right",children:Object(J.jsx)(B.a,{size:"small",className:r.removeButton,onClick:function(t){return n=e.id,void O(n);var n},disabled:S,children:Object(J.jsx)(Oe.a,{fontSize:"inherit",color:"inherit"})})})]},t)}))})]})}),g&&Object(J.jsx)(fe.a,{}),Object(J.jsx)(ye,{open:d,eventId:t,eventData:n,handleClose:function(e){e&&w(),j(!1)}}),Object(J.jsx)(me.a,{open:Boolean(v),loading:A,contentText:Object(J.jsx)(y.a,{id:"Remove_this_guest?",defaultMessage:"Remove this guest?"}),okText:Object(J.jsx)(y.a,{id:"Remove",defaultMessage:"Remove"}),onCancel:I,onOk:N})]})},ye=function(e){var t=e.open,n=e.eventId,a=e.eventData,r=e.handleClose,l=Object(E.f)(),u=Object(o.a)(l,2),b=u[0],f=u[1],p=f.data,O=f.loading,m=Object(E.e)(),x=Object(o.a)(m,2),g=x[0],k=x[1].loading,A=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,e.prev=1,e.next=4,M.b({email:M.c().max(I.g).email().required()}).validate({email:n});case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),r=e.t0,s=r.path,o=r.errors,console.error(s,o),e.abrupt("return",Object(c.a)({},s,o[0]));case 11:if(n!==(null===a||void 0===a?void 0:a.eventById.owner.email)){e.next=13;break}return e.abrupt("return",{email:"Can't add event owner as guest"});case 13:return e.next=15,b({variables:{email:n}});case 15:if(null===p||void 0===p?void 0:p.checkEmailExist){e.next=17;break}return e.abrupt("return",{email:"User with this eamil does not exist"});case 17:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,e.next=3,g({variables:{eventId:n,email:a}});case 3:r(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(J.jsxs)(d.a,{open:t,onClose:function(e){return r()},children:[Object(J.jsx)(pe.a,{children:Object(J.jsx)(y.a,{id:"Add guest",defaultMessage:"Add guest"})}),Object(J.jsx)(w.c,{initialValues:{email:""},validate:A,onSubmit:S,children:Object(J.jsxs)(w.b,{children:[Object(J.jsxs)(j.a,{children:[Object(J.jsx)(ve.a,{children:Object(J.jsx)(y.a,{id:"Add a user as guest administrator, who can cooperating manage this event with you.",defaultMessage:"Add a user as guest administrator, who can cooperating manage this event with you."})}),Object(J.jsx)(w.a,{component:_.c,autoFocus:!0,fullWidth:!0,name:"email",label:Object(J.jsx)(y.a,{id:"User email",defaultMessage:"User email"}),type:"email"})]}),Object(J.jsxs)(v.a,{children:[Object(J.jsx)(h.a,{onClick:function(e){return r()},children:Object(J.jsx)(y.a,{id:"Cancel",defaultMessage:"Cancel"})}),Object(J.jsx)(C.a,{type:"submit",variant:"contained",color:"primary",style:{width:100},loading:O||k,children:Object(J.jsx)(y.a,{id:"Add",defaultMessage:"Add"})})]})]})})]})},we=["index"],Me=[Object(J.jsx)(y.a,{id:"General",defaultMessage:"General"}),Object(J.jsx)(y.a,{id:"Guestes",defaultMessage:"Guestes"}),Object(J.jsx)(y.a,{id:"Features",defaultMessage:"Features"}),Object(J.jsx)(y.a,{id:"Customization",defaultMessage:"Customization"}),Object(J.jsx)(y.a,{id:"Integrations",defaultMessage:"Integrations"}),Object(J.jsx)(y.a,{id:"Share_access",defaultMessage:"Share access"})],ke=function(e){var t=e.index,n=Object(N.a)(e,we);return[Object(J.jsx)(ne,Object(a.a)({},n)),Object(J.jsx)(ge,Object(a.a)({},n)),Object(J.jsx)(se,Object(a.a)({},n)),Object(J.jsx)("div",{children:"Item Customization"}),Object(J.jsx)("div",{children:"Item Integrations"}),Object(J.jsx)("div",{children:"Item Share_access"})][t]},Ce=Object(O.a)((function(e){return Object(m.a)({paper:{overflowY:"hidden"},form:{display:"flex",flexDirection:"column",overflow:"hidden"},dialogContent:{display:"flex",overflowY:"hidden"},tabs:{width:200,borderRight:"1px solid ".concat(e.palette.divider)},tabRoot:{paddingRight:e.spacing(2)},tabWrapper:{alignItems:"flex-end"},contentRightBox:{width:680,height:"100%",maxHeight:420,overflowY:"auto",marginLeft:e.spacing(2),paddingLeft:50,paddingRight:50,position:"relative","&:before":{content:"' '",display:"block",position:"sticky",top:0,left:0,width:"100%",height:12,pointerEvents:"none",background:"linear-gradient(to top, ".concat(Object(x.a)(e.palette.background.paper,0)," 0%, ").concat(e.palette.background.paper," 100%)")},"&:after":{content:"' '",display:"block",position:"sticky",bottom:0,left:0,width:"100%",height:12,pointerEvents:"none",background:"linear-gradient(to bottom, ".concat(Object(x.a)(e.palette.background.paper,0)," 0%, ").concat(e.palette.background.paper," 100%)")}}})}));t.a=function(e){var t=e.defaultFocus,n=void 0===t?"name":t,r=e.eventIdState,l=e.onExiting,O=Ce(),m=Object(g.a)().formatMessage,x=Object(S.b)().enqueueSnackbar,N=Object(o.a)(r,2),F=N[0],L=N[1],B=u.a.useState(0),_=Object(o.a)(B,2),z=_[0],R=_[1],D=Object(E.p)(),T=Object(o.a)(D,2),H=T[0],P=T[1],W=P.data,V=P.loading,G=Object(E.y)(),q=Object(o.a)(G,2),U=q[0],Q=q[1],K=Q.data,Y=Q.loading,X=Object(E.g)(),Z=Object(o.a)(X,2),$=Z[0],ee=Z[1],te=ee.data,ne=ee.loading,ae=Object(E.E)(),re=Object(o.a)(ae,2),ie=re[0],ce=re[1].loading;u.a.useEffect((function(){F&&(H({variables:{eventId:F}}),U())}),[F]);var se=function(){L(""),R(0),l&&l("cancel")},oe={name:(null===W||void 0===W?void 0:W.eventById.name)||"",code:(null===W||void 0===W?void 0:W.eventById.code)||"",startAt:new Date(null===W||void 0===W?void 0:W.eventById.startAt),endAt:new Date(null===W||void 0===W?void 0:W.eventById.endAt),eventLink:"".concat(window.location.origin,"/event/").concat(null===W||void 0===W?void 0:W.eventById.id),moderation:null===W||void 0===W?void 0:W.eventById.moderation},le=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,a,r,s,o,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.code,r=t.startAt,s=t.endAt,e.prev=1,e.next=4,M.b({name:M.c().max(I.d).required(),code:M.c().max(I.c).required(),startAt:M.a(),endAt:M.a()}).validate({name:n,code:a,startAt:r,endAt:s});case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),o=e.t0,l=o.path,u=o.errors,console.error(l,u),e.abrupt("return",Object(c.a)({},l,u[0]));case 11:if(!(s<r)){e.next=13;break}return e.abrupt("return",{endAt:m({id:"End_must_after_start",defaultMessage:"End must after start"})});case 13:if(a===oe.code){e.next=18;break}return e.next=16,$({variables:{code:a}});case 16:if(!(null===te||void 0===te?void 0:te.checkEventCodeExist)){e.next=18;break}return e.abrupt("return",{code:m({id:"Code_existed",defaultMessage:"Code existed"})});case 18:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie({variables:{input:k.a(["eventLink"],Object(a.a)({eventId:F},t))}});case 2:n=e.sent,n.data&&(x(m({id:"Event_updated",defaultMessage:"Event updated"}),{variant:"success"}),se());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(J.jsxs)(d.a,{classes:{paper:O.paper},maxWidth:"lg",open:Boolean(F),onClose:se,children:[Object(J.jsx)(A.a,{title:Object(J.jsx)(y.a,{id:"Event_settings",defaultMessage:"Event settings"}),onClose:se}),Object(J.jsx)(w.c,{enableReinitialize:!0,initialValues:oe,validate:le,onSubmit:ue,children:Object(J.jsxs)(w.b,{className:O.form,children:[Object(J.jsxs)(j.a,{className:O.dialogContent,children:[Object(J.jsx)(b.a,{orientation:"vertical",variant:"scrollable",className:O.tabs,value:z,onChange:function(e,t){R(t)},children:Me.map((function(e,t){return Object(J.jsx)(f.a,{classes:{root:O.tabRoot,wrapper:O.tabWrapper},label:e},t)}))}),Object(J.jsx)(p.a,{className:O.contentRightBox,children:Object(J.jsx)(ke,{index:z,defaultFocus:n,eventId:F,eventData:W,meData:K})})]}),Object(J.jsxs)(v.a,{children:[Object(J.jsx)(h.a,{onClick:se,children:Object(J.jsx)(y.a,{id:"Cancel",defaultMessage:"Cancel"})}),Object(J.jsx)(C.a,{variant:"contained",color:"primary",style:{width:100},type:"submit",loading:V||Y||ce||ne,children:Object(J.jsx)(y.a,{id:"Save",defaultMessage:"Save"})})]})]})})]})}},561:function(e,t,n){"use strict";var a=n(5),r=n(14),i=n(1),c=(n(20),n(33)),s=n(46),o=n(92),l=i.forwardRef((function(e,t){var n=e.classes,s=e.className,l=e.color,u=void 0===l?"default":l,d=e.component,j=void 0===d?"li":d,b=e.disableGutters,f=void 0!==b&&b,p=e.disableSticky,v=void 0!==p&&p,h=e.inset,O=void 0!==h&&h,m=Object(r.a)(e,["classes","className","color","component","disableGutters","disableSticky","inset"]);return i.createElement(j,Object(a.a)({className:Object(c.a)(n.root,s,"default"!==u&&n["color".concat(Object(o.a)(u))],O&&n.inset,!v&&n.sticky,!f&&n.gutters),ref:t},m))}));t.a=Object(s.a)((function(e){return{root:{boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:e.palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},colorPrimary:{color:e.palette.primary.main},colorInherit:{color:"inherit"},gutters:{paddingLeft:16,paddingRight:16},inset:{paddingLeft:72},sticky:{position:"sticky",top:0,zIndex:1,backgroundColor:"inherit"}}}),{name:"MuiListSubheader"})(l)},562:function(e,t,n){"use strict";var a=n(237),r=n(238);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),c=(0,a(n(239)).default)(i.createElement("path",{d:"M16.53 11.06L15.47 10l-4.88 4.88-2.12-2.12-1.06 1.06L10.59 17l5.94-5.94zM19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11z"}),"EventAvailable");t.default=c},563:function(e,t,n){"use strict";var a=n(237),r=n(238);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),c=(0,a(n(239)).default)(i.createElement("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Event");t.default=c},564:function(e,t,n){"use strict";var a=n(237),r=n(238);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),c=(0,a(n(239)).default)(i.createElement("path",{d:"M9.31 17l2.44-2.44L14.19 17l1.06-1.06-2.44-2.44 2.44-2.44L14.19 10l-2.44 2.44L9.31 10l-1.06 1.06 2.44 2.44-2.44 2.44L9.31 17zM19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11z"}),"EventBusy");t.default=c},565:function(e,t,n){"use strict";var a=n(237),r=n(238);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),c=(0,a(n(239)).default)(i.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");t.default=c},664:function(e,t,n){"use strict";n.r(t),n.d(t,"getEventDateFilterLabel",(function(){return Xe}));var a=n(39),r=n(1),i=n.n(r),c=n(347),s=n(668),o=n(373),l=n(458),u=n(187),d=n(152),j=n(276),b=n(241),f=n(94),p=n.n(f),v=n(114),h=n(112),O=n(636),m=n(419),x=n(638),g=n(639),y=n(258),w=n(240),M=n(249),k=n(243),C=n(102),A=n(72),E=n(4),S=n(3),I=n(6);function N(e,t){if(Object(S.a)(2,arguments),!t||"object"!==typeof t)return new Date(NaN);var n=t.years?Object(I.a)(t.years):0,a=t.months?Object(I.a)(t.months):0,r=t.weeks?Object(I.a)(t.weeks):0,i=t.days?Object(I.a)(t.days):0,c=t.hours?Object(I.a)(t.hours):0,s=t.minutes?Object(I.a)(t.minutes):0,o=t.seconds?Object(I.a)(t.seconds):0,l=Object(E.a)(e),u=a||n?Object(A.a)(l,a+12*n):l,d=i||r?Object(C.a)(u,i+7*r):u,j=s+60*c,b=o+60*j,f=1e3*b,p=new Date(d.getTime()+f);return p}var F=n(120),L=n(242),B=n(247),_=n(385),z=n(8),R=Object(u.a)((function(e){return Object(d.a)({createForm:{minWidth:400},dateRange:{display:"flex",justifyContent:"space-between","& > *":{width:"47%"}},boldButton:{fontWeight:e.typography.fontWeightBold}})})),D=function(e){var t=e.openState,n=e.eventsQueryResult,r=R(),i=Object(y.a)().formatMessage,s=Object(F.b)().enqueueSnackbar,o=Object(a.a)(t,2),u=o[0],d=o[1],f=Object(b.g)(),C=Object(a.a)(f,2),A=C[0],E=C[1],S=E.data,I=E.loading,D=Object(b.i)(),T=Object(a.a)(D,2),H=T[0],P=T[1].loading,W=function(){n.refetch(),d(!1)};return Object(z.jsx)(O.a,{open:u,children:Object(z.jsx)(w.c,{initialValues:{name:"",code:"",startAt:new Date,endAt:N(new Date,{days:4})},validate:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,a,r,c,s,o,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.code,r=t.startAt,c=t.endAt,e.prev=1,e.next=4,M.b({name:M.c().max(L.d).required(),code:M.c().max(L.c).required(),startAt:M.a(),endAt:M.a()}).validate({name:n,code:a,startAt:r,endAt:c});case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),s=e.t0,o=s.path,l=s.errors,console.error(o,l),e.abrupt("return",Object(v.a)({},o,l[0]));case 11:if(!(c<r)){e.next=13;break}return e.abrupt("return",{endAt:i({id:"End_must_after_start",defaultMessage:"End must after start"})});case 13:return e.next=15,A({variables:{code:a}});case 15:if(!(null===S||void 0===S?void 0:S.checkEventCodeExist)){e.next=17;break}return e.abrupt("return",{code:i({id:"Code_existed",defaultMessage:"Code existed"})});case 17:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),onSubmit:function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H({variables:t});case 2:n=e.sent,n.data&&(s(i({id:"Event_created",defaultMessage:"Event created"}),{variant:"success"}),W());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:Object(z.jsxs)(w.b,{className:r.createForm,children:[Object(z.jsx)(m.a,{children:Object(z.jsx)(j.a,{id:"Create_event",defaultMessage:"Create event"})}),Object(z.jsxs)(x.a,{children:[Object(z.jsx)(w.a,{component:B.c,autoFocus:!0,fullWidth:!0,name:"name",label:i({id:"Event_name",defaultMessage:"Event name"}),margin:"normal"}),Object(z.jsxs)(c.a,{className:r.dateRange,children:[Object(z.jsx)(w.a,{component:_.a,name:"startAt",label:i({id:"Start_datetime",defaultMessage:"Start date time"}),variant:"inline",margin:"normal",autoOk:!0,disableToolbar:!0}),Object(z.jsx)(w.a,{component:_.a,name:"endAt",label:i({id:"End_datetime",defaultMessage:"End date time"}),variant:"inline",margin:"normal",autoOk:!0,disableToolbar:!0})]}),Object(z.jsx)(w.a,{component:B.c,fullWidth:!0,name:"code",label:i({id:"Event_code",defaultMessage:"Event code"}),margin:"normal"})]}),Object(z.jsxs)(g.a,{children:[Object(z.jsx)(l.a,{onClick:W,children:Object(z.jsx)(j.a,{id:"Cancel",defaultMessage:"Cancel"})}),Object(z.jsx)(k.a,{className:r.boldButton,type:"submit",color:"primary",disabled:P||I,loading:P||I,children:Object(z.jsx)(j.a,{id:"Create",defaultMessage:"Create"})})]})]})})})},T=n(40),H=n(111),P=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};function W(e,t){return function(){var n=arguments.length;if(0===n)return t();var a=arguments[n-1];return P(a)||"function"!==typeof a[e]?t.apply(this,arguments):a[e].apply(a,Array.prototype.slice.call(arguments,0,n-1))}}var V=n(51);var G=n(297);function q(e,t,n,a){var r,i=function(r){for(var i=t.length,c=0;c<i;){if(e===t[c])return n[c];c+=1}for(var s in t[c+1]=e,n[c+1]=r,e)r[s]=a?q(e[s],t,n,!0):e[s];return r};switch(Object(G.a)(e)){case"Object":return i({});case"Array":return i([]);case"Date":return new Date(e.valueOf());case"RegExp":return r=e,new RegExp(r.source,(r.global?"g":"")+(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.sticky?"y":"")+(r.unicode?"u":""));default:return e}}function U(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,a){return t.apply(this,arguments)};case 4:return function(e,n,a,r){return t.apply(this,arguments)};case 5:return function(e,n,a,r,i){return t.apply(this,arguments)};case 6:return function(e,n,a,r,i,c){return t.apply(this,arguments)};case 7:return function(e,n,a,r,i,c,s){return t.apply(this,arguments)};case 8:return function(e,n,a,r,i,c,s,o){return t.apply(this,arguments)};case 9:return function(e,n,a,r,i,c,s,o,l){return t.apply(this,arguments)};case 10:return function(e,n,a,r,i,c,s,o,l,u){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}var Q=n(12);function K(e,t,n){return function(){for(var a=[],r=0,i=e,c=0;c<t.length||r<arguments.length;){var s;c<t.length&&(!Object(Q.a)(t[c])||r>=arguments.length)?s=t[c]:(s=arguments[r],r+=1),a[c]=s,Object(Q.a)(s)||(i-=1),c+=1}return i<=0?n.apply(this,a):U(i,K(e,a,n))}}function Y(e){return null!=e&&"function"===typeof e["@@transducer/step"]}function J(e,t,n){return function(){if(0===arguments.length)return n();var a=Array.prototype.slice.call(arguments,0),r=a.pop();if(!P(r)){for(var i=0;i<e.length;){if("function"===typeof r[e[i]])return r[e[i]].apply(r,a);i+=1}if(Y(r)){var c=t.apply(null,a);return c(r)}}return n.apply(this,arguments)}}var X=n(261),Z=n(41),$=n(284),ee=Object(Z.a)((function(e){return!!P(e)||!!e&&("object"===typeof e&&(!Object($.a)(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&(e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1)))))})),te=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();var ne=Object(V.a)((function(e,t){return U(e.length,(function(){return e.apply(t,arguments)}))}));function ae(e,t,n){for(var a=n.next();!a.done;){if((t=e["@@transducer/step"](t,a.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}a=n.next()}return e["@@transducer/result"](t)}function re(e,t,n,a){return e["@@transducer/result"](n[a](ne(e["@@transducer/step"],e),t))}var ie="undefined"!==typeof Symbol?Symbol.iterator:"@@iterator";function ce(e,t,n){if("function"===typeof e&&(e=function(e){return new te(e)}(e)),ee(n))return function(e,t,n){for(var a=0,r=n.length;a<r;){if((t=e["@@transducer/step"](t,n[a]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}a+=1}return e["@@transducer/result"](t)}(e,t,n);if("function"===typeof n["fantasy-land/reduce"])return re(e,t,n,"fantasy-land/reduce");if(null!=n[ie])return ae(e,t,n[ie]());if("function"===typeof n.next)return ae(e,t,n);if("function"===typeof n.reduce)return re(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var se=function(){return this.xf["@@transducer/init"]()},oe=function(){function e(e,t,n,a){this.valueFn=e,this.valueAcc=t,this.keyFn=n,this.xf=a,this.inputs={}}return e.prototype["@@transducer/init"]=se,e.prototype["@@transducer/result"]=function(e){var t;for(t in this.inputs)if(Object(X.a)(t,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[t]))["@@transducer/reduced"]){e=e["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){var n=this.keyFn(t);return this.inputs[n]=this.inputs[n]||[n,this.valueAcc],this.inputs[n][1]=this.valueFn(this.inputs[n][1],t),e},e}(),le=K(4,[],J([],K(4,[],(function(e,t,n,a){return new oe(e,t,n,a)})),(function(e,t,n,a){return ce((function(a,r){var i=n(r);return a[i]=e(Object(X.a)(i,a)?a[i]:q(t,[],[],!1),r),a}),{},a)}))),ue=Object(V.a)(W("groupBy",le((function(e,t){return null==e&&(e=[]),e.push(t),e}),null))),de=n(628),je=n(561),be=n(383),fe=n(266),pe=n(16),ve=n(268),he=n(369),Oe=n(421),me=n(384),xe=n(370),ge=n(457),ye=n(5),we=n(14),Me=(n(20),n(33)),ke=n(46),Ce=r.forwardRef((function(e,t){var n=e.classes,a=e.className,i=Object(we.a)(e,["classes","className"]);return r.createElement("div",Object(ye.a)({className:Object(Me.a)(n.root,a),ref:t},i))}));Ce.muiName="ListItemSecondaryAction";var Ae=Object(ke.a)({root:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"}},{name:"MuiListItemSecondaryAction"})(Ce),Ee=n(632),Se=n(191),Ie=n(429),Ne=n.n(Ie),Fe=n(428),Le=n.n(Fe),Be=n(563),_e=n.n(Be),ze=n(562),Re=n.n(ze),De=n(564),Te=n.n(De),He=n(565),Pe=n.n(He),We=Object(u.a)((function(e){return Object(d.a)({listItem:{"& .actionHover":{display:"none"},"&:hover .actionHover":{display:"inline-flex"}},code:{marginLeft:e.spacing(2)},actionHoverIcon:{fontSize:e.typography.pxToRem(18),color:e.palette.action.disabled}})})),Ve=function(e){var t=e.event,n=e.moreMenuState,a=We(),c=Object(pe.g)();return Object(z.jsx)(he.a,{button:!0,divider:!0,className:a.listItem,onClick:function(){c.push("/admin/event/".concat(t.id))},children:Object(z.jsxs)(i.a.Fragment,{children:[Object(z.jsx)(Oe.a,{children:Object(z.jsx)(me.a,{children:t.dateStatus===b.a.Active?Object(z.jsx)(Re.a,{}):t.dateStatus===b.a.Upcoming?Object(z.jsx)(_e.a,{}):Object(z.jsx)(Te.a,{})})}),Object(z.jsx)(xe.a,{primary:Object(z.jsxs)(r.Fragment,{children:[Object(z.jsx)(ge.a,{color:"inherit",display:"inline",children:t.name}),Object(z.jsxs)(ge.a,{className:a.code,color:"textSecondary",display:"inline",children:["# ",t.code]})]}),secondary:Object(z.jsxs)(i.a.Fragment,{children:[Object(z.jsx)(Se.a,{value:t.startAt}),", ",Object(z.jsx)(Se.b,{value:t.startAt})," ~ ",Object(z.jsx)(Se.a,{value:t.endAt}),", ",Object(z.jsx)(Se.b,{value:t.endAt})]})}),Object(z.jsxs)(Ae,{children:[Object(z.jsx)(Ee.a,{className:"actionHover",onClick:function(e){return function(e,t){e.stopPropagation(),window.open("/event/".concat(t))}(e,t.id)},children:Object(z.jsx)(Le.a,{className:a.actionHoverIcon})}),Object(z.jsx)(Ee.a,{className:"actionHover",onClick:function(e){return function(e,t){e.stopPropagation(),window.open("/event/".concat(t,"/wall"))}(e,t.id)},children:Object(z.jsx)(Ne.a,{className:a.actionHoverIcon})}),Object(z.jsx)(Ee.a,{onClick:function(e){return function(e,t){e.stopPropagation(),n[1]({anchorEl:e.currentTarget,id:t})}(e,t.id)},children:Object(z.jsx)(Pe.a,{})})]})]})})},Ge=n(381),qe=n(264),Ue=["children"],Qe=Object(u.a)((function(e){return Object(d.a)({eventList:{margin:e.spacing(2,0),flex:1,overflow:"hidden"},listGroup:{color:e.palette.primary.contrastText,fontWeight:e.typography.fontWeightBold,backgroundColor:e.palette.primary.main}})})),Ke=function(e){var t=e.eventsByMeQueryResult,n=Qe(),r=Object(pe.g)(),c=t.data,s=t.loading,l=t.refetch,u=t.fetchMore,d=i.a.useState({anchorEl:null,id:""}),f=i.a.useState({open:!1,id:""}),v=Object(a.a)(f,2),O=v[0],m=v[1],x=i.a.useState(""),g=Object(b.m)(),y=Object(a.a)(g,1)[0],w=function(){d[1]({anchorEl:null,id:""})},M=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({variables:{eventId:O.id}});case 2:l(),m({open:!1,id:""});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=i.a.useMemo((function(){var e=ue((function(e){return e.dateStatus}))((null===c||void 0===c?void 0:c.eventsByMe.list)||[]);return{groupKeys:Object.keys(e),groupCounts:Object.values(e).map((function(e){return e.length}))}}),[c]),C=k.groupKeys,A=k.groupCounts,E=[{text:Object(z.jsx)(j.a,{id:"Open",defaultMessage:"Open"}),onClick:function(e){r.push("/admin/event/".concat(d[0].id))}},{text:Object(z.jsx)(j.a,{id:"Setting",defaultMessage:"Setting"}),onClick:function(e){x[1](d[0].id),w()}},{disabled:!0,text:Object(z.jsx)(j.a,{id:"Share_access",defaultMessage:"Share access"}),onClick:function(e){}},{disabled:!0,text:Object(z.jsx)(j.a,{id:"Duplicate",defaultMessage:"Duplicate"}),onClick:function(e){}},{disabled:!0,text:Object(z.jsx)(j.a,{id:"Transfer",defaultMessage:"Transfer"}),onClick:function(e){}},{text:Object(z.jsx)(j.a,{id:"Delete",defaultMessage:"Delete"}),onClick:function(e){var t;t=d[0].id,m({open:!0,id:t}),w()}}];return Object(z.jsxs)(i.a.Fragment,{children:[Object(z.jsx)(de.a,{className:n.eventList,children:Object(z.jsx)(fe.a,{style:{height:"100%",width:"100%"},groupCounts:A,endReached:function(){(null===c||void 0===c?void 0:c.eventsByMe.hasNextPage)&&u({variables:{pagination:{offset:(null===c||void 0===c?void 0:c.eventsByMe.list.length)||L.b,limit:(null===c||void 0===c?void 0:c.eventsByMe.limit)||L.a}}})},components:{Group:function(e){var t=e.children,a=Object(H.a)(e,Ue);return Object(z.jsx)(je.a,Object(T.a)(Object(T.a)({},a),{},{className:n.listGroup,children:t}))},Footer:function(){return Object(z.jsx)(qe.a,{loading:s,hasNextPage:null===c||void 0===c?void 0:c.eventsByMe.hasNextPage})}},groupContent:function(e){return Xe(C[e])},itemContent:function(e){var t=null===c||void 0===c?void 0:c.eventsByMe.list[e];return t?Object(z.jsx)(Ve,{event:t,moreMenuState:d}):Object(z.jsx)("div",{})}})}),Object(z.jsx)(be.a,{MenuListProps:{dense:!0},anchorEl:d[0].anchorEl,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(d[0].anchorEl),onClose:w,children:E.map((function(e,t){return Object(z.jsx)(o.a,{disabled:e.disabled,onClick:e.onClick,children:e.text},t)}))}),Object(z.jsx)(ve.a,{open:O.open,contentText:Object(z.jsx)(j.a,{id:"Delete_this_event?",defaultMessage:"Delete this event?"}),okText:Object(z.jsx)(j.a,{id:"Delete",defaultMessage:"Delete"}),onCancel:function(){m({open:!1,id:""})},onOk:M}),Object(z.jsx)(Ge.a,{eventIdState:x})]})},Ye=Object(u.a)((function(e){return Object(d.a)({eventsBox:{display:"flex",flexDirection:"column",height:"100%"},actionBox:{display:"flex",justifyContent:"flex-end"},actionField:{marginLeft:e.spacing(2),"&.ownerFilter":{width:80},"&.eventDateFilter":{width:120}}})})),Je=function(e){switch(e){case b.b.Owner:return Object(z.jsx)(j.a,{id:"Owner",defaultMessage:"Owner"});case b.b.Guest:return Object(z.jsx)(j.a,{id:"Guest",defaultMessage:"Guest"});default:return Object(z.jsx)(j.a,{id:"All",defaultMessage:"All"})}},Xe=function(e){switch(e){case b.a.Active:return Object(z.jsx)(j.a,{id:"Active",defaultMessage:"Active"});case b.a.Upcoming:return Object(z.jsx)(j.a,{id:"Upcoming",defaultMessage:"Upcoming"});case b.a.Past:return Object(z.jsx)(j.a,{id:"Past",defaultMessage:"Past"});default:return Object(z.jsx)(j.a,{id:"All",defaultMessage:"All"})}};t.default=function(e){var t=e.searchString,n=Ye(),r=i.a.useState(!1),u=i.a.useState("ALL"),d=Object(a.a)(u,2),f=d[0],p=d[1],v=i.a.useState("ALL"),h=Object(a.a)(v,2),O=h[0],m=h[1],x=Object(b.s)({variables:{searchString:t,eventOwnerFilter:"ALL"!==f?f:void 0,dateStatusFilter:"ALL"!==O?O:void 0,pagination:{limit:L.a,offset:L.b}}});return Object(z.jsxs)(c.a,{className:n.eventsBox,children:[Object(z.jsxs)(c.a,{className:n.actionBox,children:[Object(z.jsx)(s.a,{className:n.actionField+" ownerFilter",value:f,onChange:function(e){p(e.target.value)},children:["ALL"].concat(Object.values(b.b)).map((function(e,t){return Object(z.jsx)(o.a,{value:e,children:Je(e)},t)}))}),Object(z.jsx)(s.a,{className:n.actionField+" eventDateFilter",value:O,onChange:function(e){m(e.target.value)},children:["ALL"].concat(Object.values(b.a)).map((function(e,t){return Object(z.jsx)(o.a,{value:e,children:Xe(e)},t)}))}),Object(z.jsx)(l.a,{className:n.actionField,variant:"contained",color:"primary",onClick:function(){r[1](!0)},children:Object(z.jsx)(j.a,{id:"CREATE_EVENT",defaultMessage:"Create Event"})})]}),Object(z.jsx)(Ke,{eventsByMeQueryResult:x}),Object(z.jsx)(D,{openState:r,eventsQueryResult:x})]})}}}]);
//# sourceMappingURL=19.7e0abc7c.chunk.js.map