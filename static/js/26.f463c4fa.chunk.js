(this["webpackJsonpaskent-client"]=this["webpackJsonpaskent-client"]||[]).push([[26],{285:function(e,t,n){"use strict";var a=n(40),o=n(111),i=(n(1),n(371)),r=n(632),c=n(8),s=["id","status","onTitle","offTitle","onIcon","offIcon","handleToggle"];t.a=function(e){var t=e.id,n=e.status,l=e.onTitle,u=e.offTitle,d=e.onIcon,p=e.offIcon,j=e.handleToggle,h=Object(o.a)(e,s);return Object(c.jsx)(i.a,{title:n?l:u,children:Object(c.jsx)("span",{children:Object(c.jsx)(r.a,Object(a.a)(Object(a.a)({},h),{},{onClick:function(e){return j(e,t,n)},children:n?d:p}))})})}},319:function(e,t,n){"use strict";var a=n(39),o=(n(1),n(383)),i=n(373),r=n(52),c=n(276),s=n(8),l=function(e){switch(e){case r.c.Popular:return Object(s.jsx)(c.a,{id:"Popular",defaultMessage:"Popular"});case r.c.Recent:return Object(s.jsx)(c.a,{id:"Recent",defaultMessage:"Recent"});case r.c.Oldest:return Object(s.jsx)(c.a,{id:"Oldest",defaultMessage:"Oldest"});case r.c.Starred:return Object(s.jsx)(c.a,{id:"Starred",defaultMessage:"Starred"})}};t.a=function(e){var t=e.classes,n=e.anchorOrigin,c=e.transformOrigin,u=e.menuElState,d=e.orderSelectedState,p=Object(a.a)(d,2),j=p[0],h=p[1],b=Object(a.a)(u,2),m=b[0],f=b[1],x=function(){f(null)};return Object(s.jsx)(o.a,{keepMounted:!0,anchorEl:m,getContentAnchorEl:null,anchorOrigin:n,transformOrigin:c,open:Boolean(m),onClose:x,children:Object.values(r.c).map((function(e){return Object(s.jsx)(i.a,{className:null===t||void 0===t?void 0:t.menuItem,selected:j===e,onClick:function(){return h(e),void x()},children:l(e)},e)}))})}},444:function(e,t,n){"use strict";n.r(t);var a=n(39),o=n(1),i=n.n(o),r=n(644),c=n(377),s=n(347),l=n(457),u=n(187),d=n(152),p=n(16),j=n(437),h=n.n(j),b=n(276),m=n(620),f=n(265),x=n.n(f),g=n(345),O=n.n(g),v=n(117),y=n(319),S=n(8),T=Object(u.a)((function(e){return Object(d.a)({sortSelect:{display:"inline-flex",alignItems:"center",cursor:"pointer",color:"inherit",marginLeft:e.spacing(1),fontSize:e.typography.pxToRem(18),"& .arrowIcon":{color:"inherit",fontSize:e.typography.pxToRem(16)}},icon:{color:"inherit",fontSize:e.typography.pxToRem(18),marginRight:e.typography.pxToRem(4)},menuItem:{width:e.typography.pxToRem(180)}})})),I=function(e){var t=e.orderSelectedState,n=T(),a=i.a.useState(null),o=Object(v.b)().mouseStop;return Object(S.jsxs)(i.a.Fragment,{children:[Object(S.jsxs)(l.a,{className:n.sortSelect,onClick:function(e){a[1](e.currentTarget)},children:[Object(S.jsx)(x.a,{className:n.icon}),Object(S.jsx)(b.a,{id:"Top_questions",defaultMessage:"Top questions"}),"totalCount",Object(S.jsx)(m.a,{in:!o,children:Object(S.jsx)(O.a,{className:"arrowIcon"})})]}),Object(S.jsx)(y.a,{classes:{menuItem:n.menuItem},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},menuElState:a,orderSelectedState:t})]})},w=n(52),R=n(242),q=n(40),N=n(94),k=n.n(N),C=n(112),z=n(443),M=n(369),B=n(370),P=n(384),A=n(258),U=n(241),D=n(299),_=n.n(D),E=n(298),Q=n.n(E),L=n(277),H=n.n(L),J=n(278),F=n.n(J),G=n(285),W=Object(u.a)((function(e){return Object(d.a)({listItem:{flexWrap:"wrap",position:"relative",marginBottom:e.typography.pxToRem(16),borderRadius:e.shape.borderRadius,backgroundColor:"".concat(e.palette.background.default,"70"),"&:hover .questionHover":{opacity:1},"& .questionHover":{opacity:0,transition:e.transitions.create("opacity")}},topQuestion:{backgroundColor:"".concat(e.palette.success[e.palette.type],"90")},itemPrimary:{display:"flex",alignItems:"center"},avatar:{width:e.typography.pxToRem(28),height:e.typography.pxToRem(28),marginRight:e.typography.pxToRem(12)},questionContent:{width:"100%",fontSize:e.typography.pxToRem(28),marginTop:e.typography.pxToRem(12),marginBottom:e.typography.pxToRem(4)},questionActionBox:{position:"absolute",display:"flex",alignItems:"center",top:0,right:e.typography.pxToRem(16)},thumbUpBox:{display:"inline-flex",alignItems:"center",marginLeft:e.typography.pxToRem(16)},voteCount:{fontSize:e.typography.pxToRem(14)},thumbUpIcon:{fontSize:e.typography.pxToRem(14),marginLeft:e.typography.pxToRem(8)}})})),K=function(e){var t,n,o,r,c,u=e.question,d=e.isScrolling,p=void 0!==d&&d,j=W(),h=Object(A.a)().formatMessage,m=Object(U.G)(),f=Object(a.a)(m,2),x=f[0],g=f[1].loading,O=Object(U.I)(),v=Object(a.a)(O,2),y=v[0],T=v[1].loading,I=function(){var e=Object(C.a)(k.a.mark((function e(t,n,a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x({variables:{questionId:n,reviewStatus:a?U.c.Publish:U.c.Archive}});case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),w=function(){var e=Object(C.a)(k.a.mark((function e(t,n,a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({variables:{questionId:n,top:!a}});case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return Object(S.jsx)(M.a,{component:"div",className:"".concat(j.listItem," ").concat(u.top?j.topQuestion:""),children:Object(S.jsxs)(i.a.Fragment,{children:[Object(S.jsx)(B.a,{primary:Object(S.jsxs)(s.a,{className:j.itemPrimary,children:[Object(S.jsx)(P.a,{className:j.avatar,alt:!u.anonymous&&(null===(t=u.author)||void 0===t?void 0:t.name)?null===(n=u.author)||void 0===n?void 0:n.name:"",src:u.anonymous||p?"":null===(o=u.author)||void 0===o?void 0:o.avatar}),Object(S.jsx)(l.a,{component:"span",variant:"body1",children:!u.anonymous&&(null===(r=u.author)||void 0===r?void 0:r.name)?null===(c=u.author)||void 0===c?void 0:c.name:Object(S.jsx)(b.a,{id:"Anonymous",defaultMessage:"Anonymous"})})]}),secondary:Object(S.jsx)(l.a,{className:j.questionContent,children:u.content})}),Object(S.jsxs)(s.a,{className:j.questionActionBox,children:[Object(S.jsx)(G.a,{className:"questionHover",id:u.id,status:u.top,disabled:T,onTitle:h({id:"Untop",defaultMessage:"Untop"}),offTitle:h({id:"Top",defaultMessage:"Top"}),onIcon:Object(S.jsx)(H.a,{fontSize:"inherit",color:"secondary"}),offIcon:Object(S.jsx)(H.a,{fontSize:"inherit",color:"inherit"}),handleToggle:w}),Object(S.jsx)(G.a,{className:"questionHover",id:u.id,status:u.reviewStatus===U.c.Archive,disabled:g,onTitle:h({id:"Unarchive",defaultMessage:"Unarchive"}),offTitle:h({id:"Archive",defaultMessage:"Archive"}),onIcon:Object(S.jsx)(Q.a,{fontSize:"inherit"}),offIcon:Object(S.jsx)(_.a,{fontSize:"inherit"}),handleToggle:I}),Object(S.jsxs)(s.a,{color:"inherit",className:j.thumbUpBox,children:[Object(S.jsx)(l.a,{color:"inherit",className:j.voteCount,children:u.voteUpCount}),Object(S.jsx)(F.a,{color:"inherit",className:j.thumbUpIcon})]})]})]})})},V=i.a.memo(K,(function(e,t){return z.a(e,t)})),X=n(266),Y=n(252),Z=n(264),$=n(248),ee=function(e){var t=e.questionQueryState,n=e.questionQueryInput,o=i.a.useState(!1),r=Object(a.a)(o,2),c=r[0],s=r[1],l=i.a.useState([]),u=Object(a.a)(l,2),d=u[0],p=u[1],j=i.a.useState(0),h=Object(a.a)(j,2),b=h[0],m=h[1],f=Object(Y.b)(n.offset,n.limit,b),x=Object($.f)({variables:n,onSubscriptionData:function(e){e.client;var t,n,a=e.subscriptionData;(null===(t=a.data)||void 0===t?void 0:t.question)&&p(null===(n=a.data)||void 0===n?void 0:n.question)}}).loading;Object($.d)({variables:{where:n.where},onSubscriptionData:function(e){e.client;var t,n,a=e.subscriptionData;m((null===(t=a.data)||void 0===t||null===(n=t.question_aggregate.aggregate)||void 0===n?void 0:n.count)||0)}});return Object(S.jsx)(X.b,{style:{height:"100%",width:"100%"},totalCount:d.length,isScrolling:function(e){s(e)},endReached:function(){f&&t[1](Object(q.a)(Object(q.a)({},t[0]),{},{limit:2*t[0].limit}))},itemContent:function(e){return Object(S.jsx)(V,{question:d[e],isScrolling:c})},components:{Footer:function(){return Object(S.jsx)(Z.a,{loading:x,hasNextPage:f})}}})},te=Object(u.a)((function(e){return Object(d.a)({wallGrid:{width:"100%",height:"100vh",padding:e.typography.pxToRem(24),color:e.palette.text.primary,background:"radial-gradient(#3b5379 0%, #0e1935 100%)"},gridItem:{display:"flex",flexDirection:"column",height:"100%",padding:e.typography.pxToRem(24),position:"relative"},infoBox:{textAlign:"center",flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},rightTitleBox:{position:"absolute",top:"-".concat(e.typography.pxToRem(6)),left:e.typography.pxToRem(40),color:e.palette.text.secondary},listBox:{flex:1}})}));t.default=function(){var e=te(),t=Object(p.i)().id,n=i.a.useRef(null),o=i.a.useState(0),u=Object(a.a)(o,2),d=u[0],j=u[1],m=i.a.useState(),f=Object(a.a)(m,2),x=f[0],g=f[1],O=i.a.useState(w.c.Popular),v=i.a.useState({filter:w.b.Publish,searchString:"",limit:R.a,offset:R.b}),y=i.a.useState(w.c.Popular),T={where:{eventId:{_eq:t},content:{_ilike:"%".concat(v[0].searchString,"%")},reviewStatus:{_eq:v[0].filter}},limit:v[0].limit,offset:v[0].offset,order_by:Object(Y.c)(y[0])};Object($.b)({variables:{where:{id:{_eq:t}}},onSubscriptionData:function(e){e.client;var t,n,a=e.subscriptionData;(null===(t=a.data)||void 0===t?void 0:t.event.length)&&g(null===(n=a.data)||void 0===n?void 0:n.event[0])}});var q=function(){var e;j(Number(null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.clientWidth))};return i.a.useEffect((function(){return q(),window.addEventListener("resize",q),function(){return window.removeEventListener("resize",q)}})),Object(S.jsxs)(r.a,{container:!0,className:e.wallGrid,children:[Object(S.jsxs)(r.a,{item:!0,xs:3,className:e.gridItem,children:[Object(S.jsx)(c.a,{ref:n,style:{height:d},children:Object(S.jsx)(h.a,{size:d,includeMargin:!0,value:"".concat(window.location.origin,"/event/").concat(t)})}),Object(S.jsxs)(s.a,{className:e.infoBox,children:[Object(S.jsx)(l.a,{variant:"h4",color:"textPrimary",children:Object(S.jsx)(b.a,{id:"Join_at",defaultMessage:"Join at"})}),Object(S.jsx)(l.a,{variant:"h3",color:"textPrimary",children:"Askent"}),Object(S.jsxs)(l.a,{variant:"h4",color:"textPrimary",children:["# ",null===x||void 0===x?void 0:x.code]})]})]}),Object(S.jsxs)(r.a,{item:!0,xs:9,className:e.gridItem,children:[Object(S.jsx)(s.a,{className:e.rightTitleBox,children:Object(S.jsx)(I,{orderSelectedState:O})}),Object(S.jsx)(s.a,{className:e.listBox,children:Object(S.jsx)(ee,{questionQueryState:v,questionQueryInput:T})}),null]})]})}}}]);
//# sourceMappingURL=26.f463c4fa.chunk.js.map